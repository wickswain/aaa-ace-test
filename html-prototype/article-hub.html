<!DOCTYPE html>
<html dir="ltr" lang="en-US">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <!-- Axis41 Stylesheets, Scripts & Title -->
    <title>AAA</title>
    <!-- Browser / Bookmark icon -->
    <!--<link rel="apple-touch-icon" sizes="60x60" href="images/favicon/apple-icon-60x60.png" />
      <link rel="apple-touch-icon" sizes="120x120" href="images/favicon/apple-icon-120x120.png" />
      <link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png" />-->
    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" href="clientlibs/ace-www/thirdparty/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="clientlibs/ace-www/thirdparty/font_roboto/css/fonts.css" />
    <link rel="stylesheet" type="text/css" href="clientlibs/ace-www/thirdparty/font_robotoslab/css/fonts.css" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Latest compiled and minified JS -->
    <script type="text/javascript" src="clientlibs/ace-www/thirdparty/jquery/js/jquery.min.js"></script>
    <script type="text/javascript" src="clientlibs/ace-www/thirdparty/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="clientlibs/ace-www/base/css/style.css" />
    <!-- External Plugins JS : External plugin files loaded on need base -->
</head>

<body>
    <!-- The Main Wrapper
      ============================================= -->
    <div id="pagewrapper" class="clearfix container-custom">
        <header id="page-header">
            <!-- logo and navigation placed inside this container -->
        </header>
        <div id="page-container">
            <div class="container-fluid">
                <!-- Article Header Stand Alone -->
                <div class="row">
                    <div class="col-sm-1">
                        <div class="text-center hidden-sm hidden-md hidden-lg filter-link"> <a href="#" class="link-btn link-lg roboto-light font-e checked-list-item-main">All Results <i class="glyphicon glyphicon-chevron-down font-d"></i> </a></div>
                    </div>
                    <div class="col-sm-6 ">
                        <div class="article-hub">
                            <!--<div class='row article-list with-img roboto-medium font-a'>
                                <div class='col-sm-12 col-md-6 col-lg-4'>
                                    <div class='imgblock'><img src='images/footer-image.jpg' alt='' title='' /></div>
                                </div>
                                <div class='col-sm-12 col-md-6 col-lg-8 '>
                                    <div class='article-info'>
                                        <ul class='list-inline font-e'>
                                            <li><img src='images/AAA.png' alt='List Image' /></li>
                                            <li class='author'>By <a href='#'>Author name </a></li>
                                            <li class='time'><i class='glyphicon glyphicon-time'></i> <span class='date'>Month 00, 0000</span></li>
                                        </ul> <a href='#' class='roboto-light font-b list-title' title='Big city on a budget: Singapore'>Big city on a budget: Singapore</a>
                                        <p class='font-h roboto-light'>Lorem ipsum Lorem ipsumLorem ipsumLorem ipsumLorem ipsumLorem ipsumLorem ipsumLorem ipsumLorem</p>
                                        <div class="list-btn visible-xs"><a href="#" title="Solid button" class=" btn-style btn-lg btn-color-blue ">Read</a> </div>
                                    </div>
                                </div>
                            </div>--></div>
                        <div class="pagination-grid"> </div>
                    </div>
                    <div class="col-sm-1 "></div>
                    <div class="col-sm-3 ">
                        <div class="filter-grid">
                            <div class="results-categories">
                                <div class="close-filter hidden-sm hidden-md hidden-lg">FILTERS<a href="" class="close-fliter-icon pull-right link-btn link-lg roboto-medium font-d">X</a></div>
                                <div class="close-filter hidden-xs">CATEGORIES<a href="" class="close-fliter-icon pull-right roboto-light">Clear all</a></div>
                                <!--<div class="categorie-title hidden-xs">CATEGORIES</div> -->
                                <ul class="categorie-block">
                                    <li><a href="javascript:void(0);" class="font-h active" metaName="testingMetaName" metaTag="testingMetaTagName">All</a></li>
                                    <li><a href="javascript:void(0);" class="font-h" metaName="testingMetaName1" metaTag="testingMetaTagName1">Products & Services</a></li>
                                    <li><a href="javascript:void(0);" class="font-h" metaName="testingMetaName2" metaTag="testingMetaTagName2">Publications</a></li>
                                    <li><a href="javascript:void(0);" class="font-h" metaName="testingMetaName3" metaTag="testingMetaTagName3">Travel</a></li>
                                    <li><a href="javascript:void(0);" class="font-h" metaName="testingMetaName4" metaTag="testingMetaTagName4">Events</a></li>
                                    <li><a href="javascript:void(0);" class="font-h" metaName="testingMetaName5" metaTag="testingMetaTagName5">Discounts</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-1 "></div>
                </div>
            </div>
        </div>
        <footer id="page-footer">
            <!-- Footer component placed inside this container-->
        </footer>
    </div>
</body>
<script>
    $(function () {
        var metaName = "";
        var metaTag = "";
        var totalListPages;
        var resultsPerPage = 10;
        var pageNumber = 1;
        var searchkeyValue = "testing";
        $(".filter-link").click(function () {
            $(".filter-grid").show();
        });
        getArticles(searchkeyValue, '', pageNumber, metaName, metaTag);
        $(".categorie-block li a").click(function (e) {
            var metaName = $(this).attr('metaName');
            var metaTag = $(this).attr('metaTag');
            console.log(metaName);
            console.log(metaTag);
            localStorage.setItem("metaName", metaName);
            localStorage.setItem("metaTag", metaTag);
            $(".categorie-block li a").removeClass("active");
            $("[metaName=" + metaName + "]").addClass("active");
            var currentListItem = $(this).text();
            $(".checked-list-item-main").html(currentListItem);
            getArticles(searchkeyValue, '', pageNumber, metaName, metaTag);
            e.preventDefault();
        });
        $(".close-fliter-icon").click(function (e) {
            $('.filter-grid').hide();
            e.preventDefault();
        });
        $(window).resize(function () {
            var winWidth = $(window).width();
            if (winWidth >= 768) {
                $(".filter-grid").show();
            }
        });
        /* API CALl */
        function getArticles(searchkeyValue, navigation, currentPage, metaName, metaTag) {
            if (navigation === -1) {
                pageNumber = parseInt(pageNumber) - 1;
            }
            if (navigation === 1) {
                pageNumber = parseInt(pageNumber) + 1;
            }
            if (currentPage) {
                pageNumber = currentPage;
            }
            var validPage = ""
            validPage = (parseInt(pageNumber) * 10) + 1;
            validPage = parseInt(validPage) - 10;
            // var url = "http://www.mocky.io/v2/57e39b31110000db1598e34e";
            var url = "https://www.googleapis.com/customsearch/v1?key=AIzaSyDb6ZxlQVRZJJQv-t7OQU5A2ibVLlw9d3o&cx=002841571323135263873:_kstmmls-cu&q=" + searchkeyValue + "&start=" + validPage + "&callback=?";
            //var url = "https://www.googleapis.com/customsearch/v1?key=AIzaSyA5Q7Z1wbPOUa59IhoZYO52ulQjWAndn3I&cx=004650686028114475301:tlpfyltlij4&q=" + searchkeyValue + "&start=" + validPage + "&callback=?";
            // var url = "https://www.googleapis.com/customsearch/v1?key=AIzaSyBC-G6Eu9j36HTIkkCcw92_CVg_ONtK3Ec&cx=002841571323135263873:_kstmmls-cu&q=" + searchkeyValue + "&start=" + validPage + "&callback=?";
            $.getJSON(url, '', articleReceived);
        }

        function articleReceived(response) {
            if (response.error) {
                var errorMessage = response.error.message;
                $(".article-hub").hide();
                //$(".result-no").hide();
                $(".error-grid").show();
                $(".error-message").html(errorMessage);
                pageNumber = 1;
            }
            else if (response.items == null || response.items.length === 0) {
                $(".article-hub").hide();
                //$(".result-no").hide();
                $(".error-grid").show();
                $(".error-message").html("No search results found.");
                pageNumber = 1;
            }
            else {
                $(".error-grid").hide();
                $(".article-hub").show();
                var html = "";
                /* Navigation Links handling */
                var totalItems = response.searchInformation.totalResults;
                totalListPages = Math.round(totalItems / resultsPerPage);
                totalListPages = 8;
                var indexCount = response.queries.request[0].startIndex;
                if (totalListPages > 1) {
                    $("#totalListPages").html("of " + totalListPages);
                }
                // loop handling
                for (var i = 0; i < response.items.length; i++) {
                    var item = response.items[i];
                    var responseTitle = item.htmlTitle;
                    var responseUrl = item.htmlFormattedUrl;
                    var responseData = item.htmlSnippet;
                    html += "<div class='row article-list with-img roboto-medium font-a'><div class='col-sm-12 col-md-6 col-lg-4'><div class='imgblock'><img src='images/footer-image.jpg' alt='' title='' /></div></div><div class='col-sm-12 col-md-6 col-lg-8 '><div class='article-info'><ul class='list-inline font-e'><li><img src='images/CompV-logo.png' alt='List Image' /></li><li class='author'>By <a href='#'>Author name </a></li><li class='time'><i class='glyphicon glyphicon-time'></i> <span class='date'>Month 00, 0000</span></li></ul> <a href='#' class='roboto-light font-b list-title' title='Big city on a budget: Singapore'>Big city on a budget: Singapore</a><p class='font-h roboto-light'>Lorem ipsum Lorem ipsumLorem ipsumLorem ipsumLorem ipsumLorem ipsumLorem ipsumLorem ipsumLorem</p><div class='list-btn visible-xs'><a href='#' title='Solid button' class='btn-style btn-lg btn-color-blue'>Read</a></div></div></div></div>";
                }
                /* pagination Logic start */
                /* if (totalListPages > 5) {
                     defaultPage = pageNumber;
                     var reaminigPages = totalListPages - pageNumber;
                     if (reaminigPages > 6) {
                         defaultTotalPages = parseInt(pageNumber) + 5;
                     }
                     else {
                         defaultTotalPages = reaminigPages;
                     }
                 }
                 else if (pageNumber === 1) {
                     defaultPage = 1;
                     if (totalListPages < 6) {
                         defaultTotalPages = totalListPages;
                     }
                     else {
                         defaultTotalPages = 6;
                     }
                 }*/
                var reaminigPages = totalListPages - pageNumber;
                if (pageNumber <= 5 && totalListPages > 0) {
                    defaultPage = 1;
                    if (totalListPages < 5) {
                        defaultTotalPages = totalListPages;
                    }
                    else {
                        defaultTotalPages = 6;
                    }
                }
                else if (pageNumber > 5 && totalListPages > 5) {
                    defaultPage = pageNumber;
                    var reaminigPages = totalListPages - pageNumber;
                    if (reaminigPages > 5) {
                        defaultTotalPages = parseInt(pageNumber) + 5;
                    }
                    else {
                        defaultTotalPages = reaminigPages;
                    }
                }
                var navigation_html = '<ul class="row list-inline"><li class="page-links col-xs-3"><a href="#" title="Solid button" class="btn btn-style btn-sm btn-color-blue btn-reversed" id="prevPage"><span aria-hidden="true" class="prev-page glyphicon glyphicon-arrow-left"></span> Prev</a></li><li class="page-links text-center col-xs-6">';
                for (var i = defaultPage; i < defaultTotalPages; i++) {
                    navigation_html += '<a href="javascript:void(0);" class="navPage_click" id="id' + i + '">' + (i) + '</a>';
                }
                navigation_html += '</li><li class="page-links text-right col-xs-3"> <a href="#" title="Solid button" class="btn btn-style btn-sm btn-color-blue btn-reversed" id="nextPage">Next <span aria-hidden="true" class="next-page glyphicon glyphicon-arrow-right "></span></a></li></ul>';
                $('.pagination-grid').html(navigation_html);
                $(".page_link").removeClass("active");
                $("#id" + pageNumber).addClass('active');
                $('#nextPage').click(function () {
                    getArticles(searchkeyValue, 1, '', metaName, metaTag);
                });
                $('#prevPage').click(function () {
                    getArticles(searchkeyValue, -1, '', metaName, metaTag);
                });
                $(".navPage_click").click(function () {
                    var selectedPage = $(this).text();
                    getArticles(searchkeyValue, '', selectedPage, metaName, metaTag);
                });
                if (pageNumber === 1) {
                    $("#prevPage").addClass('disabled');
                }
                else if (pageNumber === totalListPages) {
                    $("#nextPage").addClass('disabled');
                }
                else {
                    $("#nextPage").removeClass('disabled');
                    $("#prevPage").removeClass('disabled');
                }
                $(".article-hub").html(html);
            }
        }
    });
</script>

</html>