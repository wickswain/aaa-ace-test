<!--/*

    Login Component.
    ----------------------------------------------------------------
    This component is used to disaply the logged in state of the active user.

    Required Fields:
    1. Sign-In Link
    2. Sing-Out Link

*/-->

<!-- Sightly global objects declaration
============================================= -->
<sly data-sly-use.signInLink="${'com.aaa.ace.sightly.providers.CTANavigationURLProvider' 
        @ url = currentStyle.rightLink2LinkTo}"/>
<sly data-sly-use.signOutLink="${'com.aaa.ace.sightly.providers.CTANavigationURLProvider' 
        @ url = currentStyle.signOutLinkTo}"/>
<sly data-sly-use.accountLink="${'com.aaa.ace.sightly.providers.CTANavigationURLProvider' 
        @ url = currentStyle.accountLinkTo}"/>
<sly data-sly-use.user="${'com.aaa.ace.sightly.providers.UserLoginProvider'
        @ signInURL = signInLink.url, signOutURL = signOutLink.url}"/>
<!-- #sightly-global-objects-declaration end -->

<!-- Login component
============================================= -->
<a data-sly-test="${!user.isLoggedIn}"
   target="${currentStyle.rightLink2NewTabFlag == 'true' ? '_blank' : '_self'}"
   href="${user.signInURL}"
   id="user-login">
    <img data-sly-test="${currentStyle.icon2Path}"
         src="${currentStyle.icon2Path}" title="${currentStyle.icon2Alt}" 
         alt="${currentStyle.icon2Alt}" class="lock-icon"/>
        ${currentStyle.rightLink2Label}
</a>

<a data-sly-test="${user.isLoggedIn}" href="javascript:void(0);" id="user-info" data-toggle="dropdown" 
   aria-haspopup="true" aria-expanded="false" class="user-info">
    <span class="restrict-characters">${user.firstName}</span>
    <i class="glyphicon glyphicon-chevron-down"></i>
    <span class="avatar">
        <img src="${currentStyle.defaultAvatarPath}" alt="${currentStyle.defaultAvatarAlt}"
             title="${currentStyle.defaultAvatarAlt}" class="img-responsive">
    </span>
</a>

<div class="profile-box dropdown-menu" aria-labelledby="user-info">
    <div class="avatar-details">
	    <div data-sly-test="${currentStyle.defaultAvatarPath}"
	         class="avatar-pic">
	        <img src="${currentStyle.defaultAvatarPath}" alt="${currentStyle.defaultAvatarAlt}"
	             title="${currentStyle.defaultAvatarAlt}" class="img-responsive">
	    </div>
        <div class="avatar-title font-f">${user.firstName}</div>
	    <div class="my-account ">
	        <a href="${accountLink.url}" class="btn-style btn-lg btn-border btn-border-reversed">${currentStyle.accountLinkLabel}</a>
	    </div>
	    <div class="signout"> 
	        <a href="${user.signOutURL}" class="link-btn link-lg link-color-orange link-reversed">${currentStyle.signOutLinkLabel}</a>
	    </div>
    </div>
</div>
<!-- #login-component end -->
